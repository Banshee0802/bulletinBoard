{% extends "base.html" %}
{% load static %}
{% load tz %}

{% block title %}–õ–æ—Ç–æ—Å{% endblock title %}

{% block content %}
<div class="container-fluid p-3"> 
    <div class="row flex-nowrap">  
        <div class="col-md-3 col-lg-3"> 
            <div class="sticky-top vh-100" style="top: 0; left: 0;">
                <h5 class="mb-3 my-4" style="color: #000000ff">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h5>
                <ul class="list-group mb-0">
                    <li class="list-group-item list-group-item-success d-flex justify-content-between align-items-center" style='background-color: #E6E6FA'>
                        <a href="{% url 'ad_list' %}" class="text-decoration-none">
                            <strong style='color: #8484f8ff'>üìã –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</strong>
                        </a>
                    </li>
                    {% for category in all_categories %}
                    <li class="list-group-item list-group-item-success d-flex justify-content-between align-items-center" style='background-color: #E6E6FA'>
                        <a href="{% url 'ads_by_category' category.slug %}" 
                           class="text-decoration-none d-flex justify-content-between align-items-center">
                            <span style='color: #8484f8ff'>{{ category.name }}</span>
                            <span class="badge bg-secondary">{{ category.advertisement_set.count }}</span>
                        </a>
                    </li>
                    {% endfor %}
                </ul>
                <a href="{% url 'admin_ads' %}" class='btn btn-custom my-2'>–û–±—ä—è–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a>
            </div>
        </div>

        <div class="col-md-9 col-lg-10">
            <div class="p-3">  
                <h1 style="color: #000000ff">–û–±—ä—è–≤–ª–µ–Ω–∏—è</h1>
                
                {% if ads %}
                    <div class="row">
                        {% for advertisement in ads %}
                            {% include 'board/includes/ads_container_include.html' with advertisement=advertisement %}
                        {% endfor %}
                    </div>

                    {% if is_paginated %}
                    <nav aria-label="Page navigation" class="mt-4">
                        <ul class="pagination justify-content-center">

                            {% if page_obj.has_previous %}
                                <li class="page-item">
                                    <a class="page-link" href="?{% if search_query %}q={{ search_query }}&{% endif %}page=1" style="background-color: #E6E6FA; color: #8484f8ff; border-color: #8484f8ff;">
                                        &laquo;&laquo;
                                    </a>
                                </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link" style="background-color: #f8f9fa; color: #6c757d; border-color: #dee2e6;">
                                        &laquo;&laquo;
                                    </span>
                                </li>
                            {% endif %}

                            {% if page_obj.has_previous %}
                                <li class="page-item">
                                    <a class="page-link" href="?{% if search_query %}q={{ search_query }}&{% endif %}page={{ page_obj.previous_page_number }}" style="background-color: #E6E6FA; color: #8484f8ff; border-color: #8484f8ff;">
                                        &laquo;
                                    </a>
                                </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link" style="background-color: #f8f9fa; color: #6c757d; border-color: #dee2e6;">
                                        &laquo;
                                    </span>
                                </li>
                            {% endif %}

                            {% for num in page_obj.paginator.page_range %}
                                {% if page_obj.number == num %}
                                    <li class="page-item active">
                                        <span class="page-link" style="background-color: #8484f8ff; border-color: #8484f8ff;">
                                            {{ num }}
                                        </span>
                                    </li>
                                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                                    <li class="page-item">
                                        <a class="page-link" href="?{% if search_query %}q={{ search_query }}&{% endif %}page={{ num }}" style="background-color: #E6E6FA; color: #8484f8ff; border-color: #8484f8ff;">
                                            {{ num }}
                                        </a>
                                    </li>
                                {% endif %}
                            {% endfor %}

                            {% if page_obj.has_next %}
                                <li class="page-item">
                                    <a class="page-link" href="?{% if search_query %}q={{ search_query }}&{% endif %}page={{ page_obj.next_page_number }}" style="background-color: #E6E6FA; color: #8484f8ff; border-color: #8484f8ff;">
                                        &raquo;
                                    </a>
                                </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link" style="background-color: #f8f9fa; color: #6c757d; border-color: #dee2e6;">
                                        &raquo;
                                    </span>
                                </li>
                            {% endif %}

                            {% if page_obj.has_next %}
                                <li class="page-item">
                                    <a class="page-link" href="?{% if search_query %}q={{ search_query }}&{% endif %}page={{ page_obj.paginator.num_pages }}" style="background-color: #E6E6FA; color: #8484f8ff; border-color: #8484f8ff;">
                                        &raquo;&raquo;
                                    </a>
                                </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link" style="background-color: #f8f9fa; color: #6c757d; border-color: #dee2e6;">
                                        &raquo;&raquo;
                                    </span>
                                </li>
                            {% endif %}
                        </ul>
                        <div class="text-center mt-2">
                            <small class="text-muted">
                                –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }} 
                                ‚Ä¢ –ü–æ–∫–∞–∑–∞–Ω–æ {{ ads|length }} –∏–∑ {{ page_obj.paginator.count }} –æ–±—ä—è–≤–ª–µ–Ω–∏–π
                            </small>
                        </div>
                    </nav>
                    {% endif %}

                {% else %}
                    <div class="text-center py-5">
                        <i class="bi bi-inbox" style="font-size: 3rem; color: #8484f8ff;"></i>
                        <p class="mt-3" style="color: #6c757d;">–û–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ—Ç</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}
{% extends "users/profile_base.html" %}

{% block title %}–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å{% endblock title %}

{% block profile_content %}

    {% if user == request.user %}
        <h2 class='my-5'>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2>
    {% else %}
        <h2>–ü—Ä–æ—Ñ–∏–ª—å {{ user.username }}</h2>
    {% endif %}

    {% if user == request.user %}
        <h4 class='my-4 d-inline'>–û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –≤–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:</h4>
    {% else %}
        <h5 class='my-4'>–û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ user.username }}</h5>
    {% endif %}

    {% if requests %}
        <ul>
        {% for req in requests %}
            <li>
                –ó–∞—è–≤–∫–∞ –æ—Ç {{ req.sender.username }} –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
                <a href='{% url "ad_detail" req.advertisement.id %}'>{{ req.advertisement.title }}</a> - 
                –°—Ç–∞—Ç—É—Å: {{ req.get_status_display }}
                {% if req.status == 'new' and user == request.user %}
                    <form method='POST' action='{% url "request_update_status" req.id %}' style='display:inline;'>
                        {% csrf_token %}
                        <br>
                        <button name='status' value='accepted' type='submit' class="btn btn-custom my-3">–ü—Ä–∏–Ω—è—Ç—å</button>
                        <button name='status' value='rejected' type='submit' class="btn btn-delete">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
                    </form>
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <span class='mx-3'>–æ—Ç–∫–ª–∏–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</span>
    {% endif %}

    {% if user == request.user %}
        <div class="my-4">
            <a href="{% url 'favorite_list' %}" class="btn btn-custom">üíñ –í–∞—à–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</a>
        </div>
    {% endif %}

    {% if ads %}
        <h2>–í–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>
        {% for advertisement in ads %}
        {% include 'board/includes/ads_container_include.html' with advertisement=advertisement %}
        {% endfor %}
    {% else %}
        <p class='my-4'>–û–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ—Ç. –°–æ–∑–¥–∞–π—Ç–µ –≤–∞—à–µ –ø–µ—Ä–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ!</p>
    {% endif %}

{% endblock profile_content %}

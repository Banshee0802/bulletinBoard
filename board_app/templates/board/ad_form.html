{% extends "base.html" %}

{% block title %}{{ title }}{% endblock title %}

{% block content %}
<h2>{{ title }}</h2>

{% if form.instance.created_at %}
    <p><strong>Создано:</strong> {{ form.instance.created_at|date:'d.m.Y H:i' }}</p>
{% endif %}

{% if form.instance.updated_at and form.instance.created_at != form.instance.updated_at %}
    <p><strong>Последнее обновление:</strong> {{ form.instance.updated_at|date:'d.m.Y H:i' }}</p>
{% endif %}

<form method='POST' enctype='multipart/form-data'>
    {% csrf_token %}
    
    <div>
        <label class="col-form-label mt-4" for="inputDefault">{{ form.title.label_tag }}</label>
        {{ form.title }}
        {{ form.title.errors }}
    </div>

    <div>
        <label for="exampleTextarea" class="form-label mt-4">{{ form.description.label_tag }}</label>
        {{ form.description }}
        {{ form.description.errors }}
    </div>

     <div>
        <label for="formFile" class="form-label mt-4">{{ form.image.label_tag }}</label>
        {{ form.image }}
        {{ form.image.errors }}
    </div>

    <div class='mt-4'>
        {{ form.categoty.label_tag }}
        {{ form.category }}
        {{ form.category.errors }}
    </div>

    <div class='mt-4'>
        <label class="form-label">{{ form.new_tags.label_tag }}</label>
        {{ form.new_tags }}
        <small class="form-text text-muted">Введите теги через запятую (например: срочно, электроника, услуги)</small>
        {{ form.new_tags.errors }}

        {% if current_tags %}
        <div class="mt-2">
            <strong>Текущие теги:</strong>
            <div class="d-flex flex-wrap gap-1 mt-1">
                {% for tag in current_tags %}
                <span class="badge bg-secondary">{{ tag.name }}</span>
                {% endfor %}
            </div>
            <small class="text-muted">Чтобы изменить теги, введите новые через запятую</small>
        </div>
        {% endif %}
    </div>
    
    <button type=submit class="btn btn-primary my-3" style="background-color: #93a89cff">{{ submit_button_text }}</button>
</form>

{% endblock content %}
{% extends "base.html" %}
{% load static %}
{% load tz %}

{% block title %}–õ–æ—Ç–æ—Å{% endblock title %}

{% block content %}
<div class="container-fluid p-3"> 
    <div class="row flex-nowrap">  
        <div class="col-md-3 col-lg-3"> 
            <div class="sticky-top vh-100" style="top: 0; left: 0;">
                <h5 class="mb-3 my-4" style="color: #000000ff">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h5>
                <ul class="list-group mb-0">
                    <li class="list-group-item list-group-item-success d-flex justify-content-between align-items-center" style='background-color: #E6E6FA'>
                        <a href="{% url 'ad_list' %}" class="text-decoration-none">
                            <strong style='color: #8484f8ff'>üìã –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</strong>
                        </a>
                    </li>
                    {% for category in all_categories %}
                    <li class="list-group-item list-group-item-success d-flex justify-content-between align-items-center" style='background-color: #E6E6FA'>
                        <a href="{% url 'ads_by_category' category.slug %}" 
                           class="text-decoration-none d-flex justify-content-between align-items-center">
                            <span style='color: #8484f8ff'>{{ category.name }}</span>
                            <span class="badge bg-secondary">{{ category.advertisement_set.count }}</span>
                        </a>
                    </li>
                    {% endfor %}
                </ul>
                <a href="{% url 'admin_ads' %}" class='btn btn-custom my-2'>–û–±—ä—è–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a>
            </div>
        </div>

        <div class="col-md-9 col-lg-10">
            <div class="p-3">  
                <h1 style="color: #000000ff">–û–±—ä—è–≤–ª–µ–Ω–∏—è</h1>
                
                {% if ads %}
                    <div 
                        id='adsContainer' 
                        class="row" 
                        data-initial-offset='{{ ads|length }}' 
                        data-has-more='{{ has_more|yesno:"true,false" }}'
                        data-url='{% url "load_more_ads" %}'
                        data-search-query="{{ search_query }}">
                        {% for advertisement in ads %}
                            {% include 'board/includes/ads_container_include.html' with advertisement=advertisement %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="text-center py-5">
                        <i class="bi bi-inbox" style="font-size: 3rem; color: #8484f8ff;"></i>
                        <p class="mt-3" style="color: #6c757d;">–û–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ—Ç</p>
                    </div>
                {% endif %}
                {% if has_more %}
                <div id='loadingSpinner' class="text-center d-none">
                    <div class="spinner-grow text-primary custom-spinner" role="status">
                        <span class="sr-only">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}